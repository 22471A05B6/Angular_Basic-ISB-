<div class="booking-page">

  <div class="booking-card">

    <h2>Book Your Trip</h2>

    <form #bookingForm="ngForm" (ngSubmit)="submitForm(bookingForm)">

      <div class="form-group">
        <input type="text"
               name="name"
               [(ngModel)]="booking.name"
               #name="ngModel"
               required
               minlength="3"
               placeholder="Full Name">
        <small *ngIf="name.invalid && name.touched">
          Minimum 3 characters
        </small>
      </div>

      <div class="form-group">
        <input type="email"
               name="email"
               [(ngModel)]="booking.email"
               #email="ngModel"
               required
               placeholder="Email">
        <small *ngIf="email.invalid && email.touched">
          Enter valid email
        </small>
      </div>

      <div class="form-group">
        <input type="tel"
               name="phone"
               [(ngModel)]="booking.phone"
               #phone="ngModel"
               required
               pattern="^[0-9]{10}$"
               placeholder="Phone Number">
        <small *ngIf="phone.invalid && phone.touched">
          Enter 10 digit number
        </small>
      </div>

      <div class="form-group">
        <select name="destination"
                [(ngModel)]="booking.destination"
                required
                (change)="updatePrice()">
          <option value="">Select Destination</option>
          <option *ngFor="let dest of destinations"
                  [value]="dest.name">
            {{ dest.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <input type="date"
               name="date"
               [(ngModel)]="booking.date"
               [min]="minDate"
               required>
      </div>

      <div class="form-group">
        <input type="number"
               name="persons"
               [(ngModel)]="booking.persons"
               min="1"
               required
               (input)="calculateTotal()"
               placeholder="Number of Persons">
      </div>

      <button type="submit" class="btn-primary">
        Book Now
      </button>

    </form>

  </div>

  <!-- SUMMARY -->
  <div class="summary-card" *ngIf="selectedPrice > 0">

    <h3>Summary</h3>

    <p><strong>Destination:</strong> {{ booking.destination }}</p>
    <p><strong>Price:</strong> ₹{{ selectedPrice }}</p>
    <p><strong>Persons:</strong> {{ booking.persons }}</p>
    <hr>
    <h4>Total: ₹{{ totalAmount }}</h4>

  </div>

</div>

<!-- Confirmation Popup -->
<!-- Alert Confirmation Popup -->
<div class="alert-overlay" *ngIf="showDialog">
  <div class="alert-box">

    <div class="alert-header">
      ⚠ Confirm Booking
    </div>

    <div class="alert-body">
      <p><strong>Destination:</strong> {{ booking.destination }}</p>
      <p><strong>Total Amount:</strong> ₹{{ totalAmount }}</p>
    </div>

    <div class="alert-buttons">
      <button class="confirm-btn" (click)="confirmBooking(bookingForm)">
        Confirm
      </button>
      <button class="cancel-btn" (click)="cancelBooking()">
  Cancel
</button>
    </div>

  </div>
</div>

<!-- Toast -->
<div class="toast" *ngIf="toastMessage">
  {{ toastMessage }}
</div>
