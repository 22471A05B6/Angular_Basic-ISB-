<div class="booking-page">

  <div class="booking-card">

    <h2>Book Your Trip</h2>

    <form #bookingForm="ngForm" (ngSubmit)="submitForm(bookingForm)">

      <!-- NAME -->
      <div class="form-group">
        <input type="text"
               name="name"
               [(ngModel)]="booking.name"
               #name="ngModel"
               required
               minlength="3"
               placeholder="Full Name">
        <small *ngIf="name.invalid && name.touched">
          Minimum 3 characters required
        </small>
      </div>

      <!-- EMAIL -->
      <div class="form-group">
        <input type="email"
               name="email"
               [(ngModel)]="booking.email"
               #email="ngModel"
               required
               email
               placeholder="Email">
        <small *ngIf="email.invalid && email.touched">
          Enter valid email address
        </small>
      </div>

      <!-- PHONE -->
      <div class="form-group">
        <input type="tel"
               name="phone"
               [(ngModel)]="booking.phone"
               #phone="ngModel"
               required
               pattern="^[0-9]{10}$"
               placeholder="Phone Number">
        <small *ngIf="phone.invalid && phone.touched">
          Enter valid 10 digit number
        </small>
      </div>

      <!-- DESTINATION -->
      <div class="form-group">
        <select name="destination"
                [(ngModel)]="booking.destination"
                #destination="ngModel"
                required
                (change)="updatePrice()">
          <option value="">Select Destination</option>
          <option *ngFor="let dest of destinations"
                  [value]="dest.name">
            {{ dest.name }}
          </option>
        </select>

        <small *ngIf="destination.invalid && destination.touched">
          Please select destination
        </small>
      </div>

      <!-- DATE -->
      <div class="form-group">
        <input type="date"
               name="date"
               [(ngModel)]="booking.date"
               #date="ngModel"
               [min]="minDate"
               required>
        <small *ngIf="date.invalid && date.touched">
          Select valid date
        </small>
      </div>

      <!-- PERSONS -->
      <div class="form-group">
        <input type="number"
               name="persons"
               [(ngModel)]="booking.persons"
               #persons="ngModel"
               min="1"
               required
               (input)="calculateTotal()"
               placeholder="Number of Persons">
        <small *ngIf="persons.invalid && persons.touched">
          Minimum 1 person required
        </small>
      </div>

      <!-- SUBMIT BUTTON -->
      <button type="submit"
              class="btn-primary"
              [disabled]="bookingForm.invalid">
        Book Now
      </button>

    </form>

  </div>

  <!-- SUMMARY -->
  <div class="summary-card" *ngIf="selectedPrice > 0">

    <h3>Summary</h3>

    <p><strong>Destination:</strong> {{ booking.destination }}</p>
    <p><strong>Price per Person:</strong> ₹{{ selectedPrice }}</p>
    <p><strong>Persons:</strong> {{ booking.persons }}</p>

    <hr>

    <h4>Total: ₹{{ totalAmount }}</h4>

  </div>

</div>


<!-- CONFIRMATION POPUP -->
<div class="alert-overlay" *ngIf="showDialog">
  <div class="alert-box">

    <div class="alert-header">
      ⚠ Confirm Booking
    </div>

    <div class="alert-body">
      <p><strong>Destination:</strong> {{ booking.destination }}</p>
      <p><strong>Total Amount:</strong> ₹{{ totalAmount }}</p>
    </div>

    <div class="alert-buttons">
      <button class="confirm-btn"
              (click)="confirmBooking(bookingForm)">
        Confirm
      </button>

      <button class="cancel-btn"
              (click)="cancelBooking()">
        Cancel
      </button>
    </div>

  </div>
</div>


<!-- TOAST MESSAGE -->
<div class="toast" *ngIf="toastMessage">
  {{ toastMessage }}
</div>